<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cds: cds::queue::vyukov_mpmc_bounded&lt; T, OPTIONS &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacecds.html">cds</a>      </li>
      <li><a class="el" href="namespacecds_1_1queue.html">queue</a>      </li>
      <li><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html">vyukov_mpmc_bounded</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>cds::queue::vyukov_mpmc_bounded&lt; T, OPTIONS &gt; Class Template Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cds::queue::vyukov_mpmc_bounded" -->
<p>Vyukov's MPMC bounded queue.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;cds/queue/vyukov_mpmc_bounded.h&gt;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2a9bf0190db3d4ba6a8bf73c2ca4887"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::value_type" ref="ab2a9bf0190db3d4ba6a8bf73c2ca4887" args="" -->
typedef T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ab2a9bf0190db3d4ba6a8bf73c2ca4887">value_type</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Value type stored in queue. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#afb746451ae817a96a27e5efbca4462b7">vyukov_mpmc_bounded</a> (size_t nCapacity=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the queue of capacity <code>nCapacity</code>.  <a href="#afb746451ae817a96a27e5efbca4462b7"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename SOURCE , typename FUNC &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#a105da1a44654e4a17781d2bad217e1dc">enqueue</a> (SOURCE const &amp;data, FUNC func)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueues <code>data</code> to queue using copy functor.  <a href="#a105da1a44654e4a17781d2bad217e1dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ca670b2dc29dc371d4071908adc2a68"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::enqueue" ref="a7ca670b2dc29dc371d4071908adc2a68" args="(value_type const &amp;data)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#a7ca670b2dc29dc371d4071908adc2a68">enqueue</a> (<a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ab2a9bf0190db3d4ba6a8bf73c2ca4887">value_type</a> const &amp;data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueues <code>data</code> to queue. <br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename DEST , typename FUNC &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#a5f6612603e4c7a247c2e36299db6c3af">dequeue</a> (DEST &amp;data, FUNC func)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dequeues an item from queue.  <a href="#a5f6612603e4c7a247c2e36299db6c3af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ad905b2190866a4934ee00f2270814db1">dequeue</a> (<a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ab2a9bf0190db3d4ba6a8bf73c2ca4887">value_type</a> &amp;data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dequeues an item from queue to <code>data</code>.  <a href="#ad905b2190866a4934ee00f2270814db1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae1066c0f52fa5c3defb2ba8bad71cae8"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::push" ref="ae1066c0f52fa5c3defb2ba8bad71cae8" args="(value_type const &amp;data)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ae1066c0f52fa5c3defb2ba8bad71cae8">push</a> (<a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ab2a9bf0190db3d4ba6a8bf73c2ca4887">value_type</a> const &amp;data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Synonym of <a class="el" href="queue_common_interface.html#enqueue">enqueue</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd097b0860a8c868cd872c18d550548e"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::pop" ref="acd097b0860a8c868cd872c18d550548e" args="(value_type &amp;data)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#acd097b0860a8c868cd872c18d550548e">pop</a> (<a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ab2a9bf0190db3d4ba6a8bf73c2ca4887">value_type</a> &amp;data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Synonym of <a class="el" href="queue_common_interface.html#dequeue">dequeue</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb8efd00795e2665c932c63d2ddf4a21"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::clear" ref="acb8efd00795e2665c932c63d2ddf4a21" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#acb8efd00795e2665c932c63d2ddf4a21">clear</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the queue. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename T, typename... OPTIONS&gt;<br/>
 class cds::queue::vyukov_mpmc_bounded&lt; T, OPTIONS &gt;</h3>

<p>Vyukov's MPMC bounded queue. </p>
<p>This algorithm is developed by Dmitry Vyukov (see <a href="http://www.1024cores.net">http://www.1024cores.net</a>) It's multi-producer multi-consumer (MPMC), array-based, fails on overflow, does not require GC, w/o priorities, causal FIFO, blocking producers and consumers queue. The algorithm is pretty simple and fast. It's not lockfree in the official meaning, just implemented by means of atomic RMW operations w/o mutexes.</p>
<p>The cost of enqueue/dequeue is 1 CAS per operation. No dynamic memory allocation/management during operation. Producers and consumers are separated from each other (as in the two-lock queue), i.e. do not touch the same data while queue is not empty.</p>
<dl class="user"><dt><b>Source:</b></dt><dd><a href="http://www.1024cores.net/home/lock-free-algorithms/queues/bounded-mpmc-queue">http://www.1024cores.net/home/lock-free-algorithms/queues/bounded-mpmc-queue</a></dd></dl>
<dl class="user"><dt><b>Template parameters</b></dt><dd><ul>
<li><code>T</code> - type stored in queue. Must be assignable. </li>
<li><code>OPTIONS</code> - queue's options</li>
</ul>
Options <code>OPTIONS</code> are: <ul>
<li><a class="el" href="structcds_1_1opt_1_1buffer.html" title="Option setter for user-provided plain buffer [type-option].">cds::opt::buffer</a> - buffer to store items. Mandatory option, see option description for full list of possible types. </li>
<li><a class="el" href="structcds_1_1opt_1_1value__cleaner.html" title="[type-option] value cleaning">cds::opt::value_cleaner</a> - a functor to clean item dequeued. Default value is opt::v::empty_disposer</li>
</ul>
</dd></dl>
<dl class="user"><dt><b>License</b></dt><dd>Simplified BSD license by Dmitry Vyukov (<a href="http://www.1024cores.net/site/1024cores/home/code-license">http://www.1024cores.net/site/1024cores/home/code-license</a>)</dd></dl>
<dl class="user"><dt><b>Example</b></dt><dd><div class="fragment"><pre class="fragment"><span class="preprocessor">        #include &lt;cds/queue/vyukov_mpmc_bounded.h&gt;</span>

 <span class="comment">// Queue with 1024 item static buffer</span>
        <a class="code" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html" title="Vyukov&amp;#39;s MPMC bounded queue.">cds::queue::vyukov_mpmc_bounded&lt;int, cds::opt::buffer&lt; cds::opt::v::static_buffer&lt;int, 1024&gt;</a> &gt; &gt; myQueue ;
</pre></div> </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="afb746451ae817a96a27e5efbca4462b7"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::vyukov_mpmc_bounded" ref="afb746451ae817a96a27e5efbca4462b7" args="(size_t nCapacity=0)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename... OPTIONS&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html">cds::queue::vyukov_mpmc_bounded</a>&lt; T, OPTIONS &gt;::<a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html">vyukov_mpmc_bounded</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"> <em>nCapacity</em> = <code>0</code>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructs the queue of capacity <code>nCapacity</code>. </p>
<p>For <a class="el" href="classcds_1_1opt_1_1v_1_1static__buffer.html" title="Static buffer (opt::buffer option)">cds::opt::v::static_buffer</a> the <code>nCapacity</code> parameter is ignored. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ad905b2190866a4934ee00f2270814db1"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::dequeue" ref="ad905b2190866a4934ee00f2270814db1" args="(value_type &amp;data)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename... OPTIONS&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html">cds::queue::vyukov_mpmc_bounded</a>&lt; T, OPTIONS &gt;::dequeue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html#ab2a9bf0190db3d4ba6a8bf73c2ca4887">value_type</a> &amp;&#160;</td>
          <td class="paramname"> <em>data</em>&#160;)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dequeues an item from queue to <code>data</code>. </p>
<p>If queue is empty, returns <code>false</code>, <code>data</code> is unchanged. </p>

</div>
</div>
<a class="anchor" id="a5f6612603e4c7a247c2e36299db6c3af"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::dequeue" ref="a5f6612603e4c7a247c2e36299db6c3af" args="(DEST &amp;data, FUNC func)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename... OPTIONS&gt; </div>
<div class="memtemplate">
template&lt;typename DEST , typename FUNC &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html">cds::queue::vyukov_mpmc_bounded</a>&lt; T, OPTIONS &gt;::dequeue </td>
          <td>(</td>
          <td class="paramtype">DEST &amp;&#160;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FUNC&#160;</td>
          <td class="paramname"> <em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dequeues an item from queue. </p>
<p><code>FUNC</code> is a functor called to copy dequeued value of type <code>T</code> to <code>dest</code> of type <code>DEST</code>. The functor's interface is: </p>
<div class="fragment"><pre class="fragment">            <span class="keyword">struct </span>myFunctor {
            <span class="keywordtype">void</span> operator()(DEST&amp; dest, T <span class="keyword">const</span>&amp; data)
            {
 <span class="comment">// Code to copy \p data to \p dest</span>
                dest = data ;
            }
            };
</pre></div><p> <b>Requirements</b> The functor <code>FUNC</code> should not throw any exception. </p>

</div>
</div>
<a class="anchor" id="a105da1a44654e4a17781d2bad217e1dc"></a><!-- doxytag: member="cds::queue::vyukov_mpmc_bounded::enqueue" ref="a105da1a44654e4a17781d2bad217e1dc" args="(SOURCE const &amp;data, FUNC func)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename... OPTIONS&gt; </div>
<div class="memtemplate">
template&lt;typename SOURCE , typename FUNC &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcds_1_1queue_1_1vyukov__mpmc__bounded.html">cds::queue::vyukov_mpmc_bounded</a>&lt; T, OPTIONS &gt;::enqueue </td>
          <td>(</td>
          <td class="paramtype">SOURCE const &amp;&#160;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FUNC&#160;</td>
          <td class="paramname"> <em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enqueues <code>data</code> to queue using copy functor. </p>
<p><code>FUNC</code> is a functor called to copy value <code>data</code> of type <code>SOURCE</code> which may be differ from type <code>T</code> stored in the queue. The functor's interface is: </p>
<div class="fragment"><pre class="fragment">                <span class="keyword">struct </span>myFunctor {
                    <span class="keywordtype">void</span> operator()(T&amp; dest, SOURCE <span class="keyword">const</span>&amp; data)
                    {
 <span class="comment">// Code to copy \p data to \p dest</span>
                        dest = data ;
                    }
                };
</pre></div><p> <b>Requirements</b> The functor <code>FUNC</code> should not throw any exception. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cds/queue/vyukov_mpmc_bounded.h</li>
</ul>
</div>
		<hr/>
		<div align="right">
			<b>cds</b> <b>0.8.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2011
			<br/>
			<i>Autogenerated Mon Mar 28 2011 21:10:43 by Doxygen 1.7.2</i>
		</div>
	</BODY>
</HTML>
